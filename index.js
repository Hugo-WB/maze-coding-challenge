(()=>{"use strict";var t={137:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(607),a=i(236),h=function(){function t(t,e){this.start={x:0,y:0},this.end={x:0,y:0},this.phazors=[],this.height=null!=e?e:Math.floor(n.canvas.height/(n.CELL_WIDTH+n.LINE_WIDTH)),this.width=null!=t?t:Math.floor(n.canvas.width/(n.CELL_WIDTH+n.LINE_WIDTH)),this.maze=a.generateEllers(this.width,this.height),this.end={x:Math.round(Math.random()*(this.width-1)),y:Math.round(Math.random()*(this.height-1))};for(var i=0;i<Math.round(this.height*this.width/200);i++)this.phazors.push([Math.round(Math.random()*(this.width-1)),Math.round(Math.random()*(this.height-1))])}return t.prototype.update=function(){},t.prototype.draw=function(){var t={x:n.LINE_WIDTH+n.OFFSET.x,y:n.LINE_WIDTH+n.OFFSET.y};n.ctx.fillStyle="red",n.ctx.fillRect((this.end.x+1)*n.LINE_WIDTH+this.end.x*n.CELL_WIDTH+n.OFFSET.x,(this.end.y+1)*n.LINE_WIDTH+this.end.y*n.CELL_WIDTH+n.OFFSET.y,n.CELL_WIDTH,n.CELL_WIDTH),n.ctx.fillStyle="blue",this.phazors.forEach((function(t){n.ctx.fillRect((t[0]+1)*n.LINE_WIDTH+t[0]*n.CELL_WIDTH+n.OFFSET.x,(t[1]+1)*n.LINE_WIDTH+t[1]*n.CELL_WIDTH+n.OFFSET.y,n.CELL_WIDTH,n.CELL_WIDTH)})),n.ctx.fillStyle="black",n.ctx.beginPath();for(var e={x:[Math.max(0,Math.round(-n.OFFSET.x/n.CELL_WIDTH*.9)),Math.min(this.width,Math.round(-n.OFFSET.x/n.CELL_WIDTH+2*Math.floor(n.canvas.width/(n.CELL_WIDTH+n.LINE_WIDTH)/2)+2))],y:[Math.max(0,Math.round(.9*-n.OFFSET.y/n.CELL_WIDTH)),Math.min(this.height,Math.round(-n.OFFSET.y/n.CELL_WIDTH)+2*Math.floor(n.canvas.height/(n.CELL_WIDTH+n.LINE_WIDTH)/2)+2)]},i=e.y[0];i<e.y[1];i++){t.y=(i+1)*n.LINE_WIDTH+i*n.CELL_WIDTH+n.OFFSET.y;for(var a=e.x[0];a<e.x[1];a++)t.x=(a+1)*n.LINE_WIDTH+a*n.CELL_WIDTH+n.OFFSET.x,n.ctx.moveTo(t.x,t.y),t.x+=n.CELL_WIDTH,this.maze[i][a].walls[0]?n.ctx.lineTo(t.x,t.y):n.ctx.moveTo(t.x,t.y),t.y+=n.CELL_WIDTH,this.maze[i][a].walls[1]?n.ctx.lineTo(t.x,t.y):n.ctx.moveTo(t.x,t.y),t.x-=n.CELL_WIDTH,this.maze[i][a].walls[2]?n.ctx.lineTo(t.x,t.y):n.ctx.moveTo(t.x,t.y),t.y-=n.CELL_WIDTH,this.maze[i][a].walls[3]?n.ctx.lineTo(t.x,t.y):n.ctx.moveTo(t.x,t.y),t.x+=n.CELL_WIDTH}n.ctx.stroke()},t}();e.default=h},778:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(607),h=n(i(137)),r=function(){function t(){this.phasing=!1,this.x=Math.round(a.canvas.width/2),this.y=Math.round(a.canvas.height/2),this.width=a.CELL_WIDTH/2,this.height=a.CELL_WIDTH/2}return t.prototype.getCurrentCoordinates=function(){return{x:Math.ceil((-a.OFFSET.x-a.LINE_WIDTH)/(a.LINE_WIDTH+a.CELL_WIDTH)+Math.floor(a.canvas.width/(a.CELL_WIDTH+a.LINE_WIDTH)/2)),y:Math.round((-a.OFFSET.y-a.LINE_WIDTH)/(a.LINE_WIDTH+a.CELL_WIDTH))+Math.floor(a.canvas.height/(a.CELL_WIDTH+a.LINE_WIDTH)/2)}},t.prototype.checkForColour=function(t){for(var e=[a.ctx.getImageData(this.x+a.CELL_WIDTH/2,this.y-(a.SPEED+1),1,1),a.ctx.getImageData(this.x+a.CELL_WIDTH+a.SPEED+1,this.y+a.CELL_WIDTH/2,1,1),a.ctx.getImageData(this.x+a.CELL_WIDTH/2,this.y+a.CELL_WIDTH+a.SPEED+1,1,1),a.ctx.getImageData(this.x-(a.SPEED+1),this.y+a.CELL_WIDTH/2,1,1)],i=0;i<e.length;i++)if(e[i].data.toString()===t)return!0;return!1},t.prototype.update=function(){var t=this;if((a.keys.w||a.keys.ArrowUp)&&(a.checkForWall(this.x,this.y,this.width,-a.SPEED)&&!this.phasing||(a.OFFSET.y+=a.SPEED)),(a.keys.a||a.keys.ArrowLeft)&&(a.checkForWall(this.x,this.y,-a.SPEED,this.width)&&!this.phasing||(a.OFFSET.x+=a.SPEED)),(a.keys.s||a.keys.ArrowDown)&&(a.checkForWall(this.x,this.y+this.width,this.width,a.SPEED)&&!this.phasing||(a.OFFSET.y-=a.SPEED)),(a.keys.d||a.keys.ArrowRight)&&(a.checkForWall(this.x+this.width,this.y,a.SPEED,this.width)&&!this.phasing||(a.OFFSET.x-=a.SPEED)),this.checkForColour("255,0,0,255")&&a.showMenu(),this.checkForColour("0,0,255,255")){var e=a.entities[1],i=this.getCurrentCoordinates();if(e instanceof h.default)for(var n=0;n<e.phazors.length;n++)if(Math.abs(e.phazors[n][0]-i.x)+Math.abs(e.phazors[n][1]-i.y)<4){e.phazors.splice(n,1);var r=a.coordinatesToOffset(Math.round(Math.random()*(a.entities[1].width-1)),Math.round(Math.random()*(a.entities[1].height-1)));a.OFFSET.x=r.x,a.OFFSET.y=r.y,this.phasing=!0,setTimeout((function(){t.phasing=!1}),1e3);break}}a.keys["="]&&(this.phasing=!0)},t.prototype.draw=function(){a.ctx.fillRect(this.x,this.y,this.width,this.width)},t}();e.default=r},236:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=e.generateEllers=void 0;var i=function(t){this.walls=[!0,!0,!0,!0],this.set=t};e.Cell=i;var n=function(t){for(var e=[],n=0;n<t;n++)e.push(new i(-1));return e};e.generateEllers=function(t,e){for(var a=0,h=[],r=[],s=[],o=0;o<t;o++)s.push(new i(a)),a+=1;for(var l=0;l<e;l++){if(l==e-1){for(o=1;o<t;o++)s[o].set!=s[o-1].set&&(s[o].walls[3]=!1,s[o-1].walls[1]=!1);r.push(s);break}for(o=1;o<t;o++)Math.random()<.5&&(s[o].set=s[o-1].set,s[o].walls[3]=!1,s[o-1].walls[1]=!1);s.forEach((function(t){h.includes(t.set)||h.push(t.set)}));var E=n(t);for(l==e&&(h=[]);h.length>0;)for(o=0;o<t;o++)h.includes(s[o].set)&&Math.random()<.3&&(s[o].walls[2]=!1,E[o].walls[0]=!1,E[o].set=s[o].set,h.splice(h.indexOf(s[o].set),1));E=E.map((function(t){return-1==t.set&&(a+=1,t.set=a),t})),r.push(s),s=E}return r}},607:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.coordinatesToOffset=e.playing=e.checkForWall=e.entities=e.showMenu=e.keys=e.SPEED=e.OFFSET=e.canvas=e.ctx=e.LINE_WIDTH=e.CELL_WIDTH=void 0;var a=n(i(137)),h=n(i(778));console.log("Cheat: Press = to phase through walls"),e.CELL_WIDTH=40,e.LINE_WIDTH=1;var r={x:0,y:0};e.OFFSET=r;var s=4;e.SPEED=s,navigator.userAgent.indexOf("Firefox")>-1&&(e.SPEED=s=8);var o=!0;e.playing=o;var l=document.getElementsByTagName("canvas")[0];e.canvas=l;var E=l.getContext("2d");if(!(E=l.getContext("2d")))throw new Error("2d context not supported");var d=E;e.ctx=d;var u=document.getElementById("start");if(null==u)throw new Error("Render button first");var c=u,f=document.getElementById("afterMenu");if(null==f)throw new Error("Render");var L=f,T={};e.keys=T;var y=[];e.entities=y,e.checkForWall=function(t,e,i,n){for(var a=d.getImageData(t,e,i,n).data,h=0;h<a.length;h++)if(0!=a[h])return!0;return!1},e.coordinatesToOffset=function(t,e){return{x:l.width/2-(41*t+1),y:l.height/2-(41*e+1)+40/3}};var x=function(){y.forEach((function(t){t.update()})),d.clearRect(0,0,l.width,l.height),y.forEach((function(t){t.draw()})),o&&requestAnimationFrame(x)};c.addEventListener("click",(function(){c.style.visibility="hidden",x()})),e.showMenu=function(){e.playing=o=!1,L.style.visibility="visible"},L.addEventListener("click",(function(){e.OFFSET=r={x:0,y:0},e.entities=y=[new h.default,new a.default(Math.round(1.2*y[1].width),Math.round(1.2*y[1].height))],L.style.visibility="hidden",e.playing=o=!0,d.clearRect(0,0,l.width,l.height),x()})),window.addEventListener("keydown",(function(t){T[t.key]=!0})),window.addEventListener("keyup",(function(t){T[t.key]=!1})),l.height=window.innerHeight,l.width=window.innerWidth,e.entities=y=[new h.default,new a.default],e.OFFSET=r={x:0,y:0},(new a.default).draw()}},e={};!function i(n){if(e[n])return e[n].exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,i),a.exports}(607)})();